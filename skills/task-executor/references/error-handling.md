# Error Handling

태스크 실행 중 에러 처리 전략.

## 에러 유형

### 1. 실행 에러
- 코드 수정 실패
- 파일 접근 불가
- 구문 오류 발생

### 2. 검증 에러
- 테스트 실패
- 빌드 실패
- 린트 오류

### 3. 시스템 에러
- 타임아웃
- 에이전트 크래시
- 리소스 부족

## 에러 처리 전략

### 자동 재시도
```
실패 → 1차 재시도 (즉시)
     → 2차 재시도 (10초 후)
     → 사용자 개입 요청
```

### 재시도 조건
- 일시적 에러 (네트워크, 타임아웃)
- 검증 실패 (수정 후 재시도 가능)

### 재시도 불가
- 구문 에러
- 권한 부족
- 파일 미존재

## 사용자 옵션

에러 발생 시 제시:

```
⚠️ T-003 실패: npm test 실패

[1] 재시도 - 같은 태스크 다시 실행
[2] 스킵 - 이 태스크와 의존 태스크 건너뛰기
[3] 수정 후 재시도 - 직접 수정 후 계속
[4] 중단 - 전체 실행 중단
```

## 마크다운 에러 표기

### 실패 태스크
```markdown
- [!] **T-003**: UserService 구현
  - 에러: `npm test` 실패
  - 로그: `TypeError: undefined is not a function`
  - 재시도: 2/2 소진
```

### 스킵된 태스크
```markdown
- [-] **T-006**: 통합 테스트
  - 스킵 사유: 의존성 T-003 실패
```

## 롤백 전략

### 자동 롤백
태스크에 `롤백:` 필드가 있으면 실패 시 자동 실행:

```markdown
- [ ] **T-005**: DB 마이그레이션
  - 롤백: `python manage.py migrate --fake previous_migration`
```

### 수동 롤백
롤백 명령 없으면 Git 기반:
```bash
git checkout -- {modified_files}
```

## 에러 로그

실행 완료 후 에러 요약:

```markdown
## Error Summary

| 태스크 | 에러 유형 | 메시지 | 처리 |
|--------|----------|--------|------|
| T-003 | 검증 실패 | npm test failed | 재시도 2회 후 스킵 |
| T-006 | 의존성 | T-003 실패 | 자동 스킵 |
```

## 부분 성공 처리

일부 태스크만 성공해도:
1. 성공한 태스크는 `[x]` 유지
2. 실패/스킵 태스크 기록
3. 다음 실행에서 미완료 태스크만 실행

```markdown
## Progress

전체 진행률: ████████████░░░░ 12/16 (75%)
성공: 10 | 실패: 2 | 스킵: 4
```
